!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const o=4*Math.floor(54),i=Math.ceil(900/o)+1,r=Math.floor(11.25)+1;function l(t){let e=function(t){return{x:100*t.x/t.z,y:100*(t.y+-100)/t.z}}(t);return{x:280+e.x,y:260-e.y}}function a(t,e,n){const o={x:e.x,y:n.y,z:n.z},i={x:n.x,y:e.y,z:e.z},r=l(e),a=l(o),c=l(n),h=l(i);t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.lineTo(c.x,c.y),t.lineTo(h.x,h.y),t.fill()}const c=document.getElementById("canvas").getContext("2d"),h=[{name:"concrete",path:"images/concrete.png",width:120,height:80},{name:"concrete_far",path:"images/concrete_far.png",width:120,height:80},{name:"concrete_close",path:"images/concrete_close.png",width:240,height:160}],f=[{name:"forest_left",path:"images/forest_left.png",width:600,height:360},{name:"forest_right",path:"images/forest_right.png",width:600,height:360},{name:"ground",path:"images/ground.png",width:50,height:50}],d=new Map,u=new Map;function s(t){return new Promise((function(e,n){t.onload=function(){e(t)},t.onerror=n}))}function g(t,e,n){const o=l({x:0,y:0,z:1e3}).y;if(c.fillStyle="black",c.fillRect(0,0,560,o),c.fillStyle="black",c.fillRect(0,o,560,360-o),n){const n=t-280-105,o=t+280+105,i=d.get("forest_left");p(i,m,n,"forest_left"),m=w(m,i.width,e);const r=d.get("forest_right");p(r,x,o,"forest_right"),x=w(x,r.width,e)}!function(t){const e={x:t-210,y:0,z:100},n={x:t+210,y:0,z:1e3};c.fillStyle="black",a(c,e,n),c.fillStyle="white",a(c,{...e,x:e.x-10},{...e,z:1e3}),a(c,{...n,z:100},{...n,x:n.x+10})}(t)}const y=[];let m=0,x=0;function w(t,e,n){return(t+1*n)%e}function p(t,e,n,o){const i=l({x:n,y:0,z:100}),r=l({x:n,y:360,z:100}),a=l({x:n,y:0,z:1e3}),h=l({x:n,y:360,z:1e3}),f=Math.abs(h.x-r.x),u=(a.y-i.y)/(a.x-i.x),s=i.x<a.x?t.height:t.height-(360-a.y),g=t.data,y=t.width,m=t.height,x=d.get("ground"),w=x.data,p=x.width,z=x.height,M=n>0?n-p:n,v=new Uint8ClampedArray(g.length);for(let t=0;t<v.length;t+=4){const o=t/4%y;if(o>f)continue;const r=(t/4-o)/y,l=360-r-100;if(r>o*u+s){const r=-1e4/l,c=(n<0?o+i.x-280:o+a.x-280)*r/100,h=n<0?Math.floor(c-M):Math.floor(p-c+M);if(h<0||h>=p){v[t]=0,v[t+1]=0,v[t+2]=0,v[t+3]=255;continue}const f=4*(Math.floor(r-100+e)%z*p+h),d=h>10?Math.floor((h-10)/(p-10)*255):0;v[t]=w[f]-d,v[t+1]=w[f+1]-d,v[t+2]=w[f+2]-d,v[t+3]=w[f+3]}else{const i=100*n/(o+n-(n>0?f:0)),r=l*i/100- -100,a=(Math.floor(i-100)+e)%y;if(a<0||a>y){v[t]=0,v[t+1]=0,v[t+2]=0,v[t+3]=255;continue}const c=Math.floor(360-r);if(c<0||c>m){v[t+1]=0,v[t+2]=0,v[t+3]=255;continue}const h=4*(c*y+a);if(h>=v.length){v[t+1]=0,v[t+2]=0,v[t+3]=255;continue}v[t]=g[h],v[t+1]=g[h+1],v[t+2]=g[h+2],v[t+3]=g[h+3]}}const S=new ImageData(v,y,m);c.putImageData(S,Math.min(r.x,h.x),0,0,0,f,360)}function z(t,e){let n=e+10,o={x:e-10,y:0,z:Math.max(t,100)},i={x:n,y:0,z:Math.min(t+40,1e3)};c.fillStyle="white",a(c,o,i)}function M(t,e){return t<0?e-26.25-157.5:e+26.25}function v(t,e){return t<0?e-26.25:e+26.25+157.5}function S(t,e,n){let o=M(e,n),i=v(e,n);if(t<500){const n=e>0?o:i,r={x:n,y:0,z:t+10},a={x:n,y:78.75,z:t};c.fillStyle="khaki",function(t,e,n){const o={x:e.x,y:n.y,z:e.z},i={x:n.x,y:e.y,z:n.z},r=l(e),a=l(o),c=l(n),h=l(i);t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.lineTo(c.x,c.y),t.lineTo(h.x,h.y),t.fill()}(c,r,a);const h={x:o,y:78.75,z:t},f={x:i,y:78.75,z:t+10};c.fillStyle="khaki",function(t,e,n){const o={x:e.x,y:e.y,z:n.z},i={x:n.x,y:n.y,z:e.z},r=l(e),a=l(o),c=l(n),h=l(i);t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.lineTo(c.x,c.y),t.lineTo(h.x,h.y),t.fill()}(c,h,f)}const r=l({x:o,y:78.75,z:t}),a=l({x:i,y:0,z:t});t>600?c.drawImage(u.get("concrete_far"),r.x,r.y,a.x-r.x,a.y-r.y):t>300?c.drawImage(u.get("concrete"),r.x,r.y,a.x-r.x,a.y-r.y):c.drawImage(u.get("concrete_close"),r.x,r.y,a.x-r.x,a.y-r.y)}let b=[],I=[],_=0,E=0,T=0,O=0,k=60,D=0,B=0,P=0,L=0,W=-1;for(let t=0;t<r;t++)b.push(100+80*t);!function(){let t=550;for(;t<1e3;){Math.random()<.7&&I.push({z:t,position:Math.random()>.5?1:-1}),t+=o}let e=I.length;for(;e<i;)I.push({z:0,position:0}),e++}();let j=!1;var A;function H(t){const e=Date.now()-O+T,n=Math.floor(e/1e3);k=60-n,B=P,P=Date.now(),P-D>1e3&&(E=_,_=0,D=P);const i=(P-B)/1e3*60,r=4*i;L+=r;Math.abs(W-t)>.08&&(W+=.08*Math.sign(t-W)*i,W=Math.min(W,1),W=Math.max(W,-1));const l=105*W;if(function(t,e,n){const o=t[0];if(o.z>1&&o.z<100){const t=M(o.position,e),i=v(o.position,e);if(n>t-78.75&&n<i+78.75)return!0}return!1}(I,l,-l))return A.LOST;b=function(t,e){const n=new Array(t.length);for(let o=0;o<t.length;o++)n[o]=t[o]-e;if(n[0]<60){for(let e=0;e<t.length-1;e++)n[e]=t[e+1];const e=n[t.length-2]+40+40;n[t.length-1]=Math.min(e,1e3)}return n}(b,r),I=function(t,e){if(t[0].z<1)return t;const n=[...t];if(n[0].z<98){for(let t=0;t<n.length-1;t++)n[t]=n[t+1];n[n.length-1]={z:0,position:0}}for(let t=0;t<n.length;t++)n[t].z=n[t].z-e;return n}(I,r),_+=1,L>o&&(I=function(t){let e=t.length;for(let n=0;n<t.length;n++)if(t[n].z<1){e=n;break}if(e===t.length)return t;if(Math.random()>.7)return t;const n=[...t];return Math.random()<.5?n[e]={z:1e3,position:-1}:n[e]={z:1e3,position:1},n}(I),L=0),c.clearRect(0,0,560,360),g(l,Math.floor(1*i),j),function(){if(0===y.length)for(let t=0;t<8;t++)y.push({x:Math.floor(120+320*Math.random()),y:Math.floor(20+100*Math.random())});for(const t of y)c.fillStyle="white",c.fillRect(t.x,t.y,2,2)}();for(let t=b.length-1;t>=0;t--)z(b[t],l);for(let t=I.length-1;t>=0;t--)I[t].z>98&&S(I[t].z,I[t].position,l);let a="00";return k>9?a=String(k):k>0&&(a="0"+k),function(t,e){c.font="20px sans-serif",c.fillStyle=e?"green":"white",c.fillText(t,440,20,100)}("Время: "+a+"\r\nFPS: "+(E>9?E:"0"+E),k<10),k<=0?A.WON:A.OK}!function(t){t[t.OK=0]="OK",t[t.WON=1]="WON",t[t.LOST=2]="LOST"}(A||(A={}));let N=-1,R=!1;const C=()=>{const t=H(N);return t===A.WON?(document.removeEventListener("keydown",U),void(document.getElementById("won").hidden=!1)):t===A.LOST?(document.removeEventListener("keydown",U),void(document.getElementById("lost").hidden=!1)):void(R?T=Date.now()-O+T:window.requestAnimationFrame(()=>C()))};function F(){!function(){const t=Date.now();O=t,D=t,B=t,P=t}(),window.requestAnimationFrame(()=>C())}async function K(){if(window.screen.width<560){const t=document.getElementById("canvas"),e=document.getElementById("left-arrow"),n=document.getElementById("right-arrow"),o=window.innerWidth-e.width-n.width-10,i=window.innerHeight-10,r=t.width/t.height;let l=o/i>r?i:o/r;t.style.height=String(Math.floor(l))+"px",t.style.width=String(Math.floor(l*r))+"px",document.body.style.height=String(window.innerHeight)+"px",document.body.style.width=String(window.innerWidth)+"px",e.style.height=String(Math.floor(window.innerHeight/2))+"px",e.hidden=!1,e.addEventListener("click",(function(){N=1})),n.style.height=String(Math.floor(window.innerHeight/2))+"px",n.hidden=!1,n.addEventListener("click",(function(){N=-1}))}else{document.getElementById("manual").hidden=!1,j=!0}await function(){const t=h.map(t=>{const e=new Image(t.width,t.height);return e.src=t.path,s(e).then(e=>({name:t.name,image:e}))});return Promise.all(t).then(t=>{for(const e of t)u.set(e.name,e.image)})}(),await function(){const t=document.getElementById("canvas-tech"),e=t.getContext("2d"),n=f.map(t=>{const n=new Image(t.width,t.height);return n.src=t.path,s(n).then(n=>(e.drawImage(n,0,0),{name:t.name,imageData:e.getImageData(0,0,t.width,t.height)}))});return Promise.all(n).then(e=>{var n;for(const t of e)d.set(t.name,t.imageData);null===(n=t.parentNode)||void 0===n||n.removeChild(t)})}(),F()}function q(){return!(window.screen.width<560&&window.innerWidth<560&&window.innerWidth<window.innerHeight)}if(q())K();else{document.getElementById("horizontal-alert").hidden=!1}function U(t){if("ArrowRight"===t.code&&(t.preventDefault(),N=-1),"ArrowLeft"===t.code&&(t.preventDefault(),N=1),"Escape"===t.code){t.preventDefault(),R=!0,document.getElementById("paused").hidden=!1}if("Space"===t.code&&(t.preventDefault(),R)){document.getElementById("paused").hidden=!0,R=!1,F()}}window.addEventListener("resize",(function(){const t=document.getElementById("horizontal-alert");q()?(t.hidden=!0,R?(R=!1,F()):K()):(R=!0,t.hidden=!1)})),document.addEventListener("keydown",U)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvY29uc3RzLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL3Byb2plY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvZHJhd09iamVjdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRElTVEFOQ0VfQkVUV0VFTl9CTE9DS1MiLCJNYXRoIiwiZmxvb3IiLCJOVU1fT0ZfQkxPQ0tTIiwiY2VpbCIsIk5VTV9PRl9ST0FEX01BUktTIiwiY2FudmFzUG9pbnQiLCJtb2RlbFBvaW50IiwicG9pbnQiLCJ4IiwieiIsInkiLCJjYW1lcmFQb2ludCIsIkNBTlZBU19XSURUSCIsIkNBTlZBU19IRUlHSFQiLCJkcmF3UmVjdFhZIiwiY29udGV4dCIsImxlZnRfYm90dG9tX3BvaW50IiwicmlnaHRfdG9wX3BvaW50IiwibGVmdF90b3BfcG9pbnQiLCJyaWdodF9ib3R0b21fcG9pbnQiLCJsYnBfY2FudmFzIiwibHRwX2NhbnZhcyIsInJ0cF9jYW52YXMiLCJyYnBfY2FudmFzIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiZmlsbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiaW1hZ2VEZXNjcmlwdGlvbnMiLCJwYXRoIiwid2lkdGgiLCJoZWlnaHQiLCJyYXdEYXRhRGVzY3JpcHRpb25zIiwicmF3RGF0YSIsIk1hcCIsInByb21pc2lmeUltYWdlTG9hZCIsImltYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvbmxvYWQiLCJvbmVycm9yIiwiZHJhd0JhY2tncm91bmQiLCJyb2FkQ2VudGVyIiwibW92ZUZvcmVzdEJ5IiwiaGlnaERldGFpbHMiLCJob3Jpem9uX3kiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImxlZnRtb3N0WCIsIlJPQURfV0lEVEgiLCJyaWdodG1vc3RYIiwiZm9yZXN0TGVmdCIsImRyYXdGb3Jlc3QiLCJvZmZzZXRMZWZ0IiwibmV4dE9mZnNldCIsImZvcmVzdFJpZ2h0Iiwib2Zmc2V0UmlnaHQiLCJyb2FkX2xlZnRfYm90dG9tX3BvaW50Iiwicm9hZF9yaWdodF90b3BfcG9pbnQiLCJkcmF3Um9hZCIsInN0YXJzIiwib2Zmc2V0IiwidGV4dHVyZVdpZHRoIiwibW92ZUJ5Iiwib3JpZ2luYWxJbWFnZURhdGEiLCJtYXhYIiwiY2FjaGVLZXkiLCJjYnAiLCJjdHAiLCJmYnAiLCJmdHAiLCJjYW52YXNXaWR0aCIsImFicyIsImsiLCJiIiwib3JpZ2luYWxBcnJheSIsImRhdGEiLCJncm91bmQiLCJncm91bmRBcnJheSIsImdyb3VuZFdpZHRoIiwiZ3JvdW5kSGVpZ2h0IiwiZ3JvdW5kWE1pbiIsImFyciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwibGVuZ3RoIiwiY2FtZXJhWSIsIm1vZGVsWiIsIm1vZGVsWCIsIm9yaWdpbmFsWCIsIm9yaWdpbmFsSSIsImFkanVzdG1lbnQiLCJtb2RlbFkiLCJvcmlnaW5hbFkiLCJpRGF0YSIsIkltYWdlRGF0YSIsInB1dEltYWdlRGF0YSIsIm1pbiIsImRyYXdNYXJrIiwibWFya19yaWdodF94IiwibWFya1dpZHRoIiwibWFya19sZWZ0X2JvdHRvbV9wb2ludCIsIm1heCIsIm1hcmtfcmlnaHRfdG9wX3BvaW50IiwiYmxvY2tMZWZ0IiwicG9zaXRpb24iLCJibG9ja1JpZ2h0IiwiZHJhd0Jsb2NrIiwiYmxvY2tMZWZ0X3giLCJibG9ja1JpZ2h0X3giLCJibG9ja0VkZ2VfeCIsIkJMT0NLX1dJRFRIIiwiZmFyX2JvdHRvbV9wb2ludCIsImNsb3NlX3RvcF9wb2ludCIsImZhcl90b3BfcG9pbnQiLCJjbG9zZV9ib3R0b21fcG9pbnQiLCJmYnBfY2FudmFzIiwiZnRwX2NhbnZhcyIsImN0cF9jYW52YXMiLCJjYnBfY2FudmFzIiwiZHJhd1JlY3RZWiIsImNscCIsImZycCIsImNsb3NlX2xlZnRfcG9pbnQiLCJmYXJfcmlnaHRfcG9pbnQiLCJmYXJfbGVmdF9wb2ludCIsImNsb3NlX3JpZ2h0X3BvaW50IiwiY2xwX2NhbnZhcyIsImZscF9jYW52YXMiLCJmcnBfY2FudmFzIiwiY3JwX2NhbnZhcyIsImRyYXdSZWN0WFoiLCJ0bHAiLCJicnAiLCJkcmF3SW1hZ2UiLCJ0aWNrTnVtIiwiZnBzIiwic2F2ZWRUaW1lIiwidGltZXN0YW1wIiwidGltZVJlbWFpbmluZyIsInRzMCIsInRzMSIsInRzMiIsImRpc3RhbmNlVG9OZXh0QmxvY2siLCJyb2FkUG9zaXRpb24iLCJwdXNoIiwiZGlzdGFuY2UiLCJyYW5kb20iLCJpbml0QmxvY2tzIiwiR2FtZVJlc3VsdCIsInJlbmRlclNjZW5lIiwicm9hZFBvc2l0aW9uR29hbCIsImVsYXBzZWQiLCJEYXRlIiwibm93IiwiZWxhcHNlZFNlYyIsImltcGxpZWRUaWNrcyIsInNwZWVkIiwic2lnbiIsInJvYWRCbG9ja3MiLCJjYXJDZW50ZXIiLCJmaXJzdEJsb2NrIiwiYmxvY2tMZWZ0WCIsImJsb2NrUmlnaHRYIiwiQ0FSX1dJRFRIIiwiY2hlY2tDcmFzaCIsIkxPU1QiLCJyb2FkTWFya3MiLCJ1cGRhdGVkTWFya3MiLCJBcnJheSIsIlpfTUlOIiwidXBkYXRlTWFya3MiLCJ1cGRhdGVkQmxvY2tzIiwidXBkYXRlQmxvY2tzIiwiZnJlZUlkeCIsImNyZWF0ZUJsb2NrcyIsImNsZWFyUmVjdCIsInN0YXIiLCJkcmF3U3RhcnMiLCJ0aW1lUmVtYWluaW5nRm9ybWF0dGVkIiwiU3RyaW5nIiwidGV4dCIsImhpZ2hsaWdodCIsImZvbnQiLCJmaWxsVGV4dCIsImRyYXdUZXh0IiwiV09OIiwiT0siLCJyb2FkX3Bvc2l0aW9uX2dvYWwiLCJwYXVzZWQiLCJuZXh0U2NlbmUiLCJyZXN1bHQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvY2Vzc0tleSIsImhpZGRlbiIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJ1biIsImluaXRUaW1lciIsImFzeW5jIiwiaW5pdEFuZFJ1biIsInNjcmVlbiIsImNhbnZhcyIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJhdmFpbGFibGVXaWR0aCIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImNhbnZhc0FzcGVjdCIsImNhbnZhc0hlaWdodCIsInN0eWxlIiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9taXNlQXJyYXkiLCJtYXAiLCJkZXNjcmlwdGlvbiIsIkltYWdlIiwic3JjIiwidGhlbiIsImFsbCIsIm5hbWVkSW1hZ2VzIiwiZWwiLCJzZXQiLCJsb2FkSW1hZ2VzIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwibmFtZWRJbWFnZURhdGEiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJsb2FkUmF3RGF0YSIsImlzT3JpZW50YXRpb25PayIsImUiLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJkaXYiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVB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M0IsS0dOM0I0QixHQUNOakMsSUFJRixTQUFTa0MsSUFDUCxRQUFJcEMsT0FBT00sT0FBTzNLLE1BQVEsS0FDcEJxSyxPQUFPVyxXQUFhLEtBQ2xCWCxPQUFPVyxXQUFhWCxPQUFPYSxhQVNyQyxHQUFJdUIsSUFDRi9CLFFBQ0ssQ0FDTy9LLFNBQVNDLGVBQWUsb0JBQ2hDd0ssUUFBUyxFQXlCZixTQUFTRCxFQUFXdUMsR0FXbEIsR0FWZSxlQUFYQSxFQUFFQyxPQUNKRCxFQUFFRSxpQkFDRjlDLEdBQXNCLEdBR1QsY0FBWDRDLEVBQUVDLE9BQ0pELEVBQUVFLGlCQUNGOUMsRUFBcUIsR0FHUixXQUFYNEMsRUFBRUMsS0FBbUIsQ0FDdkJELEVBQUVFLGlCQUNGN0MsR0FBUyxFQUNHcEssU0FBU0MsZUFBZSxVQUNoQ3dLLFFBQVMsRUFHZixHQUFlLFVBQVhzQyxFQUFFQyxPQUNKRCxFQUFFRSxpQkFDRTdDLEdBQVEsQ0FDRXBLLFNBQVNDLGVBQWUsVUFDaEN3SyxRQUFTLEVBQ2JMLEdBQVMsRUFDVFEsS0E3Q05GLE9BQU9rQixpQkFBaUIsVUFBVSxXQUNoQyxNQUFNc0IsRUFBTWxOLFNBQVNDLGVBQWUsb0JBQ2hDNk0sS0FDRkksRUFBSXpDLFFBQVMsRUFDVEwsR0FDRkEsR0FBUyxFQUNUUSxLQUVBRyxNQUlGWCxHQUFTLEVBQ1Q4QyxFQUFJekMsUUFBUyxNQU9qQnpLLFNBQVM0TCxpQkFBaUIsVUFBV3BCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL3Byb2plY3Rpb24gc2V0dGluZ3NcbmV4cG9ydCBjb25zdCBDQU5WQVNfV0lEVEggPSA1NjAuMDtcbmV4cG9ydCBjb25zdCBDQU5WQVNfSEVJR0hUID0gMzYwLjA7XG5leHBvcnQgY29uc3QgWl9IT1JJWk9OID0gMTAwMC4wO1xuZXhwb3J0IGNvbnN0IFlfSE9SSVpPTiA9IENBTlZBU19IRUlHSFQgLSAxMDAuMDtcbmV4cG9ydCBjb25zdCBaX01JTiA9IDEwMC4wO1xuZXhwb3J0IGNvbnN0IFlfQ0FNX1JPQUQgPSAtMTAwLjA7XG5cbi8vc3BlZWQgYW5kIGJsb2Nrc1xuZXhwb3J0IGNvbnN0IFNQRUVEID0gNDsgLy96LWF4aXMgdW5pdHMgcGVyIHRpY2tcbmV4cG9ydCBjb25zdCBTUEVFRF9GT1JFU1QgPSAxOyAvL3otYXhpcyB1bml0cyBwZXIgdGlja1xuZXhwb3J0IGNvbnN0IFRJTUVfQkVUV0VFTl9CTE9DS1MgPSAwLjk7ICAvL3NlY29uZHNcbmV4cG9ydCBjb25zdCBUSUNLU19QRVJfQkxPQ0sgPSBNYXRoLmZsb29yKDYwLjAgKiBUSU1FX0JFVFdFRU5fQkxPQ0tTKTtcbmV4cG9ydCBjb25zdCBESVNUQU5DRV9CRVRXRUVOX0JMT0NLUyA9IFNQRUVEICogVElDS1NfUEVSX0JMT0NLO1xuZXhwb3J0IGNvbnN0IE5VTV9PRl9CTE9DS1MgPSBNYXRoLmNlaWwoKFpfSE9SSVpPTiAtIFpfTUlOKSAvRElTVEFOQ0VfQkVUV0VFTl9CTE9DS1MpICsgMTtcbmV4cG9ydCBjb25zdCBCTE9DS19QUk9CQUJJTElUWSA9IDAuNztcbmV4cG9ydCBjb25zdCBDT1VOVERPV05fVElNRSA9IDYwOyAvL3NlY29uZHNcblxuLy9vYmplY3RzXG5leHBvcnQgY29uc3QgUk9BRF9XSURUSCA9IDQyMC4wO1xuZXhwb3J0IGNvbnN0IE1BWF9QT1NJVElPTiA9IFJPQURfV0lEVEgvNDtcbmV4cG9ydCBjb25zdCBNQVJLX0xFTkdUSCA9IDQwLjA7XG5leHBvcnQgY29uc3QgTlVNX09GX1JPQURfTUFSS1MgPSBNYXRoLmZsb29yKChaX0hPUklaT04gLSBaX01JTikgLyAoTUFSS19MRU5HVEggKyBNQVJLX0xFTkdUSCkpICsgMTtcbmV4cG9ydCBjb25zdCBCTE9DS19XSURUSCA9IFJPQURfV0lEVEggKiAzLjAgLyA4LjA7XG5leHBvcnQgY29uc3QgQkxPQ0tfTUFSR0lOID0gKFJPQURfV0lEVEggLyAyLjAgLSBCTE9DS19XSURUSCkgLzIuMDtcbmV4cG9ydCBjb25zdCBCTE9DS19IRUlHSFQgPSBCTE9DS19XSURUSCAvIDIuMDtcbmV4cG9ydCBjb25zdCBDQVJfV0lEVEggPSBCTE9DS19XSURUSDtcbmV4cG9ydCBjb25zdCBXQUxMX0hFSUdIVCA9IDM2MDtcblxuZXhwb3J0IGNvbnN0IE5VTV9PRl9TVEFSUyA9IDg7XG5leHBvcnQgY29uc3QgU1RBUl9SRUdJT05fTUFSR0lOID0gMTIwO1xuZXhwb3J0IGNvbnN0IFNUQVJfUkVHSU9OX01BUkdJTl9UT1AgPSAyMDtcbmV4cG9ydCBjb25zdCBTVEFSX1JFR0lPTl9IRUlHSFQgPSAxMDA7IiwiaW1wb3J0IHtaX01JTiwgWl9IT1JJWk9OLCBZX0NBTV9ST0FELCBZX0hPUklaT04sIENBTlZBU19XSURUSCB9IGZyb20gJy4vY29uc3RzJztcbi8vTW9kZWxQb2ludCAtPiBDYW1lcmFQb2ludCAtPiBDYW52YXNQb2ludFxuZXhwb3J0IHR5cGUgQ2FudmFzUG9pbnQgPSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG50eXBlIENhbWVyYVBvaW50ID0ge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTW9kZWxQb2ludCA9IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIHo6IG51bWJlcjtcbn1cblxuXG5mdW5jdGlvbiBjYW1lcmFQb2ludCAobW9kZWxQb2ludDogTW9kZWxQb2ludCkgOiBDYW1lcmFQb2ludCB7XG4gIHJldHVybiB7XG4gICAgICB4OiBtb2RlbFBvaW50LngqWl9NSU4gLyBtb2RlbFBvaW50LnosXG4gICAgICB5OiAobW9kZWxQb2ludC55K1lfQ0FNX1JPQUQpKlpfTUlOIC8gbW9kZWxQb2ludC56LFxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY2FudmFzUG9pbnQgKG1vZGVsUG9pbnQ6IE1vZGVsUG9pbnQpIDogQ2FudmFzUG9pbnQge1xuICBsZXQgcG9pbnQgPSBjYW1lcmFQb2ludChtb2RlbFBvaW50KTtcbiAgcmV0dXJuIHtcbiAgICAgIHg6IENBTlZBU19XSURUSCAvIDIuMCArIHBvaW50LngsXG4gICAgICB5OiBZX0hPUklaT04gLSBwb2ludC55LFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZpbml0eVBvaW50ICgpIHtcbiAgcmV0dXJuIGNhbnZhc1BvaW50KHt4OiAwLjAsIHk6IDAuMCx6OiBaX0hPUklaT059KTtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3UmVjdFhZIChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGxlZnRfYm90dG9tX3BvaW50OiBNb2RlbFBvaW50LCByaWdodF90b3BfcG9pbnQ6IE1vZGVsUG9pbnQpIHtcblxuICBjb25zdCBsZWZ0X3RvcF9wb2ludDogTW9kZWxQb2ludCA9IHtcbiAgICAgIHg6IGxlZnRfYm90dG9tX3BvaW50LngsXG4gICAgICB5OiByaWdodF90b3BfcG9pbnQueSxcbiAgICAgIHo6IHJpZ2h0X3RvcF9wb2ludC56LFxuICB9O1xuICBjb25zdCByaWdodF9ib3R0b21fcG9pbnQ6IE1vZGVsUG9pbnQgPSB7XG4gICAgICB4OiByaWdodF90b3BfcG9pbnQueCxcbiAgICAgIHk6IGxlZnRfYm90dG9tX3BvaW50LnksXG4gICAgICB6OiBsZWZ0X2JvdHRvbV9wb2ludC56LFxuICB9O1xuXG4gIGNvbnN0IGxicF9jYW52YXMgPSBjYW52YXNQb2ludChsZWZ0X2JvdHRvbV9wb2ludCk7XG4gIGNvbnN0IGx0cF9jYW52YXMgPSBjYW52YXNQb2ludChsZWZ0X3RvcF9wb2ludCk7XG4gIGNvbnN0IHJ0cF9jYW52YXMgPSBjYW52YXNQb2ludChyaWdodF90b3BfcG9pbnQpO1xuICBjb25zdCByYnBfY2FudmFzID0gY2FudmFzUG9pbnQocmlnaHRfYm90dG9tX3BvaW50KTtcblxuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBcbiAgY29udGV4dFxuICAgICAgLm1vdmVUbyhsYnBfY2FudmFzLngsIGxicF9jYW52YXMueSk7XG5cbiAgY29udGV4dFxuICAgICAgLmxpbmVUbyhsdHBfY2FudmFzLngsIGx0cF9jYW52YXMueSk7XG5cbiAgY29udGV4dFxuICAgICAgLmxpbmVUbyhydHBfY2FudmFzLngsIHJ0cF9jYW52YXMueSk7XG5cbiAgY29udGV4dFxuICAgICAgLmxpbmVUbyhyYnBfY2FudmFzLngsIHJicF9jYW52YXMueSk7XG5cbiAgY29udGV4dC5maWxsKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3UmVjdFlaIChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGZhcl9ib3R0b21fcG9pbnQ6IE1vZGVsUG9pbnQsIGNsb3NlX3RvcF9wb2ludDogTW9kZWxQb2ludCkge1xuXG4gIGNvbnN0IGZhcl90b3BfcG9pbnQ6IE1vZGVsUG9pbnQgPSB7XG4gICAgICB4OiBmYXJfYm90dG9tX3BvaW50LngsXG4gICAgICB5OiBjbG9zZV90b3BfcG9pbnQueSxcbiAgICAgIHo6IGZhcl9ib3R0b21fcG9pbnQueixcbiAgfTtcbiAgY29uc3QgY2xvc2VfYm90dG9tX3BvaW50OiBNb2RlbFBvaW50ID0ge1xuICAgICAgeDogY2xvc2VfdG9wX3BvaW50LngsXG4gICAgICB5OiBmYXJfYm90dG9tX3BvaW50LnksXG4gICAgICB6OiBjbG9zZV90b3BfcG9pbnQueixcbiAgfTtcblxuICBjb25zdCBmYnBfY2FudmFzID0gY2FudmFzUG9pbnQoZmFyX2JvdHRvbV9wb2ludCk7XG4gIGNvbnN0IGZ0cF9jYW52YXMgPSBjYW52YXNQb2ludChmYXJfdG9wX3BvaW50KTtcbiAgY29uc3QgY3RwX2NhbnZhcyA9IGNhbnZhc1BvaW50KGNsb3NlX3RvcF9wb2ludCk7XG4gIGNvbnN0IGNicF9jYW52YXMgPSBjYW52YXNQb2ludChjbG9zZV9ib3R0b21fcG9pbnQpO1xuXG4gIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gIFxuICBjb250ZXh0XG4gICAgICAubW92ZVRvKGZicF9jYW52YXMueCwgZmJwX2NhbnZhcy55KTtcblxuICBjb250ZXh0XG4gICAgICAubGluZVRvKGZ0cF9jYW52YXMueCwgZnRwX2NhbnZhcy55KTtcblxuICBjb250ZXh0XG4gICAgICAubGluZVRvKGN0cF9jYW52YXMueCwgY3RwX2NhbnZhcy55KTtcblxuICBjb250ZXh0XG4gICAgICAubGluZVRvKGNicF9jYW52YXMueCwgY2JwX2NhbnZhcy55KTtcblxuICBjb250ZXh0LmZpbGwoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdSZWN0WFogKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2xvc2VfbGVmdF9wb2ludDogTW9kZWxQb2ludCwgZmFyX3JpZ2h0X3BvaW50OiBNb2RlbFBvaW50KSB7XG5cbiAgY29uc3QgZmFyX2xlZnRfcG9pbnQ6IE1vZGVsUG9pbnQgPSB7XG4gICAgICB4OiBjbG9zZV9sZWZ0X3BvaW50LngsXG4gICAgICB5OiBjbG9zZV9sZWZ0X3BvaW50LnksXG4gICAgICB6OiBmYXJfcmlnaHRfcG9pbnQueixcbiAgfTtcbiAgY29uc3QgY2xvc2VfcmlnaHRfcG9pbnQ6IE1vZGVsUG9pbnQgPSB7XG4gICAgICB4OiBmYXJfcmlnaHRfcG9pbnQueCxcbiAgICAgIHk6IGZhcl9yaWdodF9wb2ludC55LFxuICAgICAgejogY2xvc2VfbGVmdF9wb2ludC56LFxuICB9O1xuXG4gIGNvbnN0IGNscF9jYW52YXMgPSBjYW52YXNQb2ludChjbG9zZV9sZWZ0X3BvaW50KTtcbiAgY29uc3QgZmxwX2NhbnZhcyA9IGNhbnZhc1BvaW50KGZhcl9sZWZ0X3BvaW50KTtcbiAgY29uc3QgZnJwX2NhbnZhcyA9IGNhbnZhc1BvaW50KGZhcl9yaWdodF9wb2ludCk7XG4gIGNvbnN0IGNycF9jYW52YXMgPSBjYW52YXNQb2ludChjbG9zZV9yaWdodF9wb2ludCk7XG5cbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgXG4gIGNvbnRleHRcbiAgICAgIC5tb3ZlVG8oY2xwX2NhbnZhcy54LCBjbHBfY2FudmFzLnkpO1xuXG4gIGNvbnRleHRcbiAgICAgIC5saW5lVG8oZmxwX2NhbnZhcy54LCBmbHBfY2FudmFzLnkpO1xuXG4gIGNvbnRleHRcbiAgICAgIC5saW5lVG8oZnJwX2NhbnZhcy54LCBmcnBfY2FudmFzLnkpO1xuXG4gIGNvbnRleHRcbiAgICAgIC5saW5lVG8oY3JwX2NhbnZhcy54LCBjcnBfY2FudmFzLnkpO1xuXG4gIGNvbnRleHQuZmlsbCgpO1xufSIsImltcG9ydCB7Y2FudmFzUG9pbnQsIGluZmluaXR5UG9pbnQsIGRyYXdSZWN0WFksIGRyYXdSZWN0WVosIGRyYXdSZWN0WFp9IGZyb20gJy4vcHJvamVjdGlvbic7XG5pbXBvcnQgdHlwZSB7TW9kZWxQb2ludCwgQ2FudmFzUG9pbnR9IGZyb20gJy4vcHJvamVjdGlvbic7XG5pbXBvcnQgKiBhcyBDT05TVFMgZnJvbSAnLi9jb25zdHMnIFxuXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbnR5cGUgVGV4dHVyZURlc2NyaXB0aW9uID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZzsgXG4gIHdpZHRoOiBudW1iZXI7IFxuICBoZWlnaHQ6IG51bWJlcjtcbn1cbmNvbnN0IGltYWdlRGVzY3JpcHRpb25zIDogVGV4dHVyZURlc2NyaXB0aW9uW10gPSBbXG4gIHtcbiAgICBuYW1lOiAnY29uY3JldGUnLFxuICAgIHBhdGg6ICdpbWFnZXMvY29uY3JldGUucG5nJyxcbiAgICB3aWR0aDogMTIwLFxuICAgIGhlaWdodDogODAsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnY29uY3JldGVfZmFyJyxcbiAgICBwYXRoOiAnaW1hZ2VzL2NvbmNyZXRlX2Zhci5wbmcnLFxuICAgIHdpZHRoOiAxMjAsXG4gICAgaGVpZ2h0OiA4MCxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdjb25jcmV0ZV9jbG9zZScsXG4gICAgcGF0aDogJ2ltYWdlcy9jb25jcmV0ZV9jbG9zZS5wbmcnLFxuICAgIHdpZHRoOiAyNDAsXG4gICAgaGVpZ2h0OiAxNjAsXG4gIH0sXG5dO1xuY29uc3QgcmF3RGF0YURlc2NyaXB0aW9ucyA6IFRleHR1cmVEZXNjcmlwdGlvbltdID0gW1xuICB7XG4gICAgbmFtZTogJ2ZvcmVzdF9sZWZ0JyxcbiAgICBwYXRoOiAnaW1hZ2VzL2ZvcmVzdF9sZWZ0LnBuZycsXG4gICAgd2lkdGg6IDYwMCxcbiAgICBoZWlnaHQ6IENPTlNUUy5XQUxMX0hFSUdIVCxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdmb3Jlc3RfcmlnaHQnLFxuICAgIHBhdGg6ICdpbWFnZXMvZm9yZXN0X3JpZ2h0LnBuZycsXG4gICAgd2lkdGg6IDYwMCxcbiAgICBoZWlnaHQ6IENPTlNUUy5XQUxMX0hFSUdIVCxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdncm91bmQnLFxuICAgIHBhdGg6ICdpbWFnZXMvZ3JvdW5kLnBuZycsXG4gICAgd2lkdGg6IDUwLFxuICAgIGhlaWdodDogNTAsXG4gIH0sXG5dO1xuXG5cbmNvbnN0IHJhd0RhdGEgPSBuZXcgTWFwPHN0cmluZywgSW1hZ2VEYXRhPigpO1xuY29uc3QgaW1hZ2VzID0gbmV3IE1hcDxzdHJpbmcsIEhUTUxJbWFnZUVsZW1lbnQ+KCk7XG5cbmZ1bmN0aW9uIHByb21pc2lmeUltYWdlTG9hZCAoaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+IChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKXtcbiAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgIH1cbiAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUmF3RGF0YSAoKSB7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzLXRlY2hcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG4gIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIGNvbnN0IHByb21pc2VBcnJheSA9IHJhd0RhdGFEZXNjcmlwdGlvbnMubWFwIChkZXNjcmlwdGlvbiA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoZGVzY3JpcHRpb24ud2lkdGgsIGRlc2NyaXB0aW9uLmhlaWdodCk7XG4gICAgaW1hZ2Uuc3JjID0gZGVzY3JpcHRpb24ucGF0aDtcbiAgICByZXR1cm4gcHJvbWlzaWZ5SW1hZ2VMb2FkKGltYWdlKS50aGVuKGltYWdlID0+IHtcbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGRlc2NyaXB0aW9uLm5hbWUsXG4gICAgICAgIGltYWdlRGF0YTogY29udGV4dC5nZXRJbWFnZURhdGEoMCwwLGRlc2NyaXB0aW9uLndpZHRoLCBkZXNjcmlwdGlvbi5oZWlnaHQpXG4gICAgICB9fSk7XG4gIH0pO1xuXG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlQXJyYXkpLnRoZW4obmFtZWRJbWFnZURhdGEgPT4ge1xuICAgIGZvciAoY29uc3QgZWwgb2YgbmFtZWRJbWFnZURhdGEpIHtcbiAgICAgIHJhd0RhdGEuc2V0KGVsLm5hbWUsIGVsLmltYWdlRGF0YSk7XG4gICAgfVxuICAgIGNhbnZhcy5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZChjYW52YXMpO1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW1hZ2VzICgpIHtcbiAgY29uc3QgcHJvbWlzZUFycmF5ID0gaW1hZ2VEZXNjcmlwdGlvbnMubWFwIChkZXNjcmlwdGlvbiA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoZGVzY3JpcHRpb24ud2lkdGgsIGRlc2NyaXB0aW9uLmhlaWdodCk7XG4gICAgaW1hZ2Uuc3JjID0gZGVzY3JpcHRpb24ucGF0aDtcbiAgICByZXR1cm4gcHJvbWlzaWZ5SW1hZ2VMb2FkKGltYWdlKS50aGVuKGltYWdlID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGRlc2NyaXB0aW9uLm5hbWUsXG4gICAgICAgIGltYWdlOiBpbWFnZSxcbiAgICAgIH19KTtcbiAgfSk7XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VBcnJheSkudGhlbihuYW1lZEltYWdlcyA9PiB7XG4gICAgZm9yIChjb25zdCBlbCBvZiBuYW1lZEltYWdlcykge1xuICAgICAgaW1hZ2VzLnNldChlbC5uYW1lLCBlbC5pbWFnZSk7XG4gICAgfVxuICAgIFxuICB9KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIgKCkge1xuICBjb250ZXh0LmNsZWFyUmVjdCgwLjAsIDAuMCwgQ09OU1RTLkNBTlZBU19XSURUSCwgQ09OU1RTLkNBTlZBU19IRUlHSFQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdCYWNrZ3JvdW5kIChyb2FkQ2VudGVyOiBudW1iZXIsIG1vdmVGb3Jlc3RCeTogbnVtYmVyLCBoaWdoRGV0YWlsczogYm9vbGVhbikge1xuICBjb25zdCBza3lDb2xvciA9ICBcImJsYWNrXCI7XG4gIGNvbnN0IGhvcml6b25feSA9IGluZmluaXR5UG9pbnQoKS55O1xuICBjb250ZXh0LmZpbGxTdHlsZSA9IHNreUNvbG9yO1xuICBjb250ZXh0LmZpbGxSZWN0KDAuMCwgMC4wLCBDT05TVFMuQ0FOVkFTX1dJRFRILCBob3Jpem9uX3kpO1xuICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgY29udGV4dC5maWxsUmVjdCgwLjAsIGhvcml6b25feSwgQ09OU1RTLkNBTlZBU19XSURUSCwgQ09OU1RTLkNBTlZBU19IRUlHSFQgLSBob3Jpem9uX3kpO1xuXG4gIGlmIChoaWdoRGV0YWlscykge1xuICAgIGNvbnN0IGxlZnRtb3N0WCA9IHJvYWRDZW50ZXIgLSBDT05TVFMuQ0FOVkFTX1dJRFRILzIgLSBDT05TVFMuTUFYX1BPU0lUSU9OO1xuICAgIGNvbnN0IHJpZ2h0bW9zdFggPSByb2FkQ2VudGVyICsgQ09OU1RTLkNBTlZBU19XSURUSC8yICsgQ09OU1RTLk1BWF9QT1NJVElPTjtcblxuICAgIGNvbnN0IGZvcmVzdExlZnQgPSByYXdEYXRhLmdldCgnZm9yZXN0X2xlZnQnKSBhcyBJbWFnZURhdGE7XG4gICAgZHJhd0ZvcmVzdChmb3Jlc3RMZWZ0LCBvZmZzZXRMZWZ0LCBsZWZ0bW9zdFgsICdmb3Jlc3RfbGVmdCcpO1xuICAgIG9mZnNldExlZnQgPSBuZXh0T2Zmc2V0KG9mZnNldExlZnQsIGZvcmVzdExlZnQud2lkdGgsIG1vdmVGb3Jlc3RCeSk7XG4gICAgXG4gICAgY29uc3QgZm9yZXN0UmlnaHQ9IHJhd0RhdGEuZ2V0KCdmb3Jlc3RfcmlnaHQnKSBhcyBJbWFnZURhdGE7XG4gICAgZHJhd0ZvcmVzdChmb3Jlc3RSaWdodCwgb2Zmc2V0UmlnaHQsIHJpZ2h0bW9zdFgsICdmb3Jlc3RfcmlnaHQnKTtcbiAgICBvZmZzZXRSaWdodCA9IG5leHRPZmZzZXQob2Zmc2V0UmlnaHQsIGZvcmVzdFJpZ2h0LndpZHRoLCBtb3ZlRm9yZXN0QnkpO1xuICB9XG4gIGRyYXdSb2FkKHJvYWRDZW50ZXIpO1xufSBcblxuXG5jb25zdCBzdGFycyA6IHt4OiBudW1iZXI7IHk6IG51bWJlcn1bXSA9IFtdO1xuZnVuY3Rpb24gY3JlYXRlU3RhciAoKSB7XG4gIHJldHVybiB7XG4gICAgeDogTWF0aC5mbG9vcihDT05TVFMuU1RBUl9SRUdJT05fTUFSR0lOICsgTWF0aC5yYW5kb20oKSooQ09OU1RTLkNBTlZBU19XSURUSCAtIENPTlNUUy5TVEFSX1JFR0lPTl9NQVJHSU4qMikpLFxuICAgIHk6IE1hdGguZmxvb3IoQ09OU1RTLlNUQVJfUkVHSU9OX01BUkdJTl9UT1AgKyBNYXRoLnJhbmRvbSgpKkNPTlNUUy5TVEFSX1JFR0lPTl9IRUlHSFQpLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3U3RhcnMgKCkge1xuICBcbiAgaWYgKHN0YXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ09OU1RTLk5VTV9PRl9TVEFSUzsgaSsrKSB7XG4gICAgICBzdGFycy5wdXNoKGNyZWF0ZVN0YXIoKSlcbiAgICB9XG4gIH1cblxuICAvKlxuICBpZiAoZWxhcHNlZFNlYyA+IDAgJiYgKE1hdGguZmxvb3IoZWxhcHNlZFNlYykgJSAxNSA9PT0gMCkpIHtcbiAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpDT05TVFMuTlVNX09GX1NUQVJTKTtcbiAgICBzdGFyc1tpbmRleF0gPSBjcmVhdGVTdGFyKCk7XG4gIH1cbiAgKi9cbiAgZm9yIChjb25zdCBzdGFyIG9mIHN0YXJzKSB7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgIGNvbnRleHQuZmlsbFJlY3Qoc3Rhci54LCBzdGFyLnksIDIsIDIpO1xuICB9XG4gIFxuXG5cbn1cblxuZnVuY3Rpb24gZHJhd1JvYWQgKHJvYWRDZW50ZXI6IG51bWJlcikge1xuICBjb25zdCByb2FkX2xlZnRfYm90dG9tX3BvaW50IDogTW9kZWxQb2ludCA9IHt4OiByb2FkQ2VudGVyLUNPTlNUUy5ST0FEX1dJRFRILzIsIHk6IDAuMCwgejogQ09OU1RTLlpfTUlOfTtcbiAgY29uc3Qgcm9hZF9yaWdodF90b3BfcG9pbnQgOiBNb2RlbFBvaW50ID0ge3g6IHJvYWRDZW50ZXIrQ09OU1RTLlJPQURfV0lEVEgvMiwgeTogMC4wLCB6OiBDT05TVFMuWl9IT1JJWk9OfTtcbiAgY29udGV4dC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gIGRyYXdSZWN0WFkoY29udGV4dCwgcm9hZF9sZWZ0X2JvdHRvbV9wb2ludCwgcm9hZF9yaWdodF90b3BfcG9pbnQpO1xuICBcbiAgY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XG4gIGRyYXdSZWN0WFkoY29udGV4dCwgey4uLnJvYWRfbGVmdF9ib3R0b21fcG9pbnQsIHg6IHJvYWRfbGVmdF9ib3R0b21fcG9pbnQueCAtIDEwfSwgey4uLnJvYWRfbGVmdF9ib3R0b21fcG9pbnQsIHo6IENPTlNUUy5aX0hPUklaT059KTtcbiAgZHJhd1JlY3RYWShjb250ZXh0LCB7Li4ucm9hZF9yaWdodF90b3BfcG9pbnQsIHo6IENPTlNUUy5aX01JTn0sIHsuLi5yb2FkX3JpZ2h0X3RvcF9wb2ludCwgeDogcm9hZF9yaWdodF90b3BfcG9pbnQueCsxMH0pO1xufVxuXG5sZXQgb2Zmc2V0TGVmdCA9IDA7XG5sZXQgb2Zmc2V0UmlnaHQgPSAwO1xuZnVuY3Rpb24gbmV4dE9mZnNldCAob2Zmc2V0OiBudW1iZXIsIHRleHR1cmVXaWR0aDogbnVtYmVyLCBtb3ZlQnk6IG51bWJlcikge1xuICByZXR1cm4gKG9mZnNldCArIENPTlNUUy5TUEVFRF9GT1JFU1QgKiBtb3ZlQnkpICUgdGV4dHVyZVdpZHRoO1xufVxuXG5mdW5jdGlvbiBkcmF3Rm9yZXN0IChvcmlnaW5hbEltYWdlRGF0YTogSW1hZ2VEYXRhLCBvZmZzZXQ6IG51bWJlciwgbWF4WDogbnVtYmVyLCBjYWNoZUtleTogc3RyaW5nKSB7XG5cbiAgY29uc3QgY2JwID0gY2FudmFzUG9pbnQoe3g6IG1heFgsIHk6IDAsIHo6IENPTlNUUy5aX01JTn0pO1xuICBjb25zdCBjdHAgPSBjYW52YXNQb2ludCh7eDogbWF4WCwgeTogQ09OU1RTLldBTExfSEVJR0hULCB6OiBDT05TVFMuWl9NSU59KTtcbiAgY29uc3QgZmJwID0gY2FudmFzUG9pbnQoe3g6IG1heFgsIHk6IDAsIHo6IENPTlNUUy5aX0hPUklaT059KTtcbiAgY29uc3QgZnRwID0gY2FudmFzUG9pbnQoe3g6IG1heFgsIHk6IENPTlNUUy5XQUxMX0hFSUdIVCwgejogQ09OU1RTLlpfSE9SSVpPTn0pO1xuICBjb25zdCBjYW52YXNXaWR0aCA9IE1hdGguYWJzKGZ0cC54IC0gY3RwLngpO1xuXG4gIC8veSA9IGt4K2JcbiAgY29uc3QgayA9IChmYnAueSAtIGNicC55KSAvIChmYnAueCAtIGNicC54KTtcbiAgY29uc3QgYiA9IGNicC54IDwgZmJwLnggPyBvcmlnaW5hbEltYWdlRGF0YS5oZWlnaHQgOiBvcmlnaW5hbEltYWdlRGF0YS5oZWlnaHQgLSAoQ09OU1RTLkNBTlZBU19IRUlHSFQgLSBmYnAueSk7XG5cbiAgY29uc3Qgb3JpZ2luYWxBcnJheSA9IG9yaWdpbmFsSW1hZ2VEYXRhLmRhdGE7XG4gIGNvbnN0IHdpZHRoID0gb3JpZ2luYWxJbWFnZURhdGEud2lkdGg7XG4gIGNvbnN0IGhlaWdodCA9IG9yaWdpbmFsSW1hZ2VEYXRhLmhlaWdodDtcblxuICBjb25zdCBncm91bmQgPSByYXdEYXRhLmdldCgnZ3JvdW5kJykgYXMgSW1hZ2VEYXRhO1xuICBjb25zdCBncm91bmRBcnJheSA9IGdyb3VuZC5kYXRhO1xuICBjb25zdCBncm91bmRXaWR0aCA9IGdyb3VuZC53aWR0aDtcbiAgY29uc3QgZ3JvdW5kSGVpZ2h0ID0gZ3JvdW5kLmhlaWdodDtcbiAgY29uc3QgZ3JvdW5kWE1heCA9IG1heFggPiAwID8gbWF4WCA6IG1heFggLSBncm91bmRXaWR0aDtcbiAgY29uc3QgZ3JvdW5kWE1pbiA9IG1heFggPiAwID8gbWF4WCAtIGdyb3VuZFdpZHRoIDogbWF4WDtcblxuICBjb25zdCBhcnIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkob3JpZ2luYWxBcnJheS5sZW5ndGgpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpPCBhcnIubGVuZ3RoOyBpPWkrNCkge1xuXG4gICAgY29uc3QgeCA9IChpLzQpICUgd2lkdGg7XG4gICAgaWYgKHggPiBjYW52YXNXaWR0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHkgPSAoaS80IC0geCkgLyB3aWR0aDtcblxuICAgIGNvbnN0IGNhbWVyYVkgPSBDT05TVFMuV0FMTF9IRUlHSFQgLSB5ICsgQ09OU1RTLllfQ0FNX1JPQUQ7XG4gICAgXG4gICAgaWYgKHkgPiAoeCAqIGsgKyBiKSkge1xuXG4gICAgICAvKlxuICAgICAgYXJyW2ldID0gMDtcbiAgICAgIGFycltpKzFdID0gMDtcbiAgICAgIGFycltpKzJdID0gMDtcbiAgICAgIGFycltpKzNdID0gMjU1O1xuICAgICAgY29udGludWU7XG4gICAgICAqL1xuXG4gICAgICAvL9CT0L7RgNC40LfQvtC90YLQsNC70YzQvdCw0Y8g0YLQtdC60YHRgtGD0YDQsFxuICAgICAgY29uc3QgbW9kZWxaID0gKDAgKyBDT05TVFMuWV9DQU1fUk9BRCkgKiBDT05TVFMuWl9NSU4gLyBjYW1lcmFZO1xuICAgICAgY29uc3QgY2FtZXJhWCA9IG1heFggPCAwID8geCArIGNicC54IC0gQ09OU1RTLkNBTlZBU19XSURUSC8yIDogeCArIGZicC54IC0gQ09OU1RTLkNBTlZBU19XSURUSC8yO1xuICAgICAgY29uc3QgbW9kZWxYID0gY2FtZXJhWCAqIG1vZGVsWiAvIENPTlNUUy5aX01JTjtcbiAgICAgIGNvbnN0IG9yaWdpbmFsWCA9IG1heFggPCAwID8gTWF0aC5mbG9vcihtb2RlbFggLSBncm91bmRYTWluKSA6IE1hdGguZmxvb3IoZ3JvdW5kV2lkdGggLSBtb2RlbFggKyBncm91bmRYTWluKTtcbiAgICAgIGlmIChvcmlnaW5hbFggPCAwIHx8IG9yaWdpbmFsWCA+PSBncm91bmRXaWR0aCkge1xuICAgICAgICBhcnJbaV0gPSAwO1xuICAgICAgICBhcnJbaSsxXSA9IDA7XG4gICAgICAgIGFycltpKzJdID0gMDtcbiAgICAgICAgYXJyW2krM10gPSAyNTU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JpZ2luYWxZID0gTWF0aC5mbG9vcihtb2RlbFogLSBDT05TVFMuWl9NSU4gKyBvZmZzZXQpICUgZ3JvdW5kSGVpZ2h0O1xuIFxuICAgICAgY29uc3Qgb3JpZ2luYWxJID0gKG9yaWdpbmFsWSAqIGdyb3VuZFdpZHRoICsgb3JpZ2luYWxYKSo0O1xuXG4gICAgICBjb25zdCBhZGp1c3RtZW50ID0gb3JpZ2luYWxYID4gMTAgPyBNYXRoLmZsb29yKChvcmlnaW5hbFggLSAxMCkvKGdyb3VuZFdpZHRoIC0gMTApICogMjU1KSA6IDA7XG4gICAgICBhcnJbaV0gPSBncm91bmRBcnJheVtvcmlnaW5hbEldIC0gYWRqdXN0bWVudDtcbiAgICAgIGFycltpKzFdID0gZ3JvdW5kQXJyYXlbb3JpZ2luYWxJKzFdIC0gYWRqdXN0bWVudDtcbiAgICAgIGFycltpKzJdID0gZ3JvdW5kQXJyYXlbb3JpZ2luYWxJKzJdIC0gYWRqdXN0bWVudDtcbiAgICAgIGFycltpKzNdID0gZ3JvdW5kQXJyYXlbb3JpZ2luYWxJKzNdO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgLy/QktC10YDRgtC40LrQsNC70YzQvdCw0Y8g0YLQtdC60YHRgtGD0YDQsFxuICAgICAgY29uc3QgbW9kZWxYID0geCArIG1heFggLSAobWF4WCA+IDAgPyBjYW52YXNXaWR0aCA6IDApO1xuICAgICAgY29uc3QgbW9kZWxaID0gbWF4WCAqIENPTlNUUy5aX01JTiAvIG1vZGVsWDtcbiAgICAgIGNvbnN0IG1vZGVsWSA9IGNhbWVyYVkgKiBtb2RlbFogLyBDT05TVFMuWl9NSU4gLSBDT05TVFMuWV9DQU1fUk9BRDtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxYID0gKE1hdGguZmxvb3IobW9kZWxaIC0gQ09OU1RTLlpfTUlOKSArIG9mZnNldCkgJSB3aWR0aDtcbiAgICAgIGlmIChvcmlnaW5hbFggPCAwIHx8IG9yaWdpbmFsWCA+IHdpZHRoKSB7XG4gICAgICAgIGFycltpXSA9IDA7XG4gICAgICAgIGFycltpKzFdID0gMDtcbiAgICAgICAgYXJyW2krMl0gPSAwO1xuICAgICAgICBhcnJbaSszXSA9IDI1NTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBvcmlnaW5hbFkgPSBNYXRoLmZsb29yKENPTlNUUy5XQUxMX0hFSUdIVCAtIG1vZGVsWSk7XG4gICAgICBpZiAob3JpZ2luYWxZIDwgMCB8fCBvcmlnaW5hbFkgPiBoZWlnaHQpIHtcbiAgICAgICAgYXJyW2krMV0gPSAwO1xuICAgICAgICBhcnJbaSsyXSA9IDA7XG4gICAgICAgIGFycltpKzNdID0gMjU1O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yaWdpbmFsSSA9IChvcmlnaW5hbFkgKiB3aWR0aCArIG9yaWdpbmFsWCkqNDtcbiAgICAgIGlmIChvcmlnaW5hbEkgPj0gYXJyLmxlbmd0aCkge1xuICAgICAgICBhcnJbaSsxXSA9IDA7XG4gICAgICAgIGFycltpKzJdID0gMDtcbiAgICAgICAgYXJyW2krM10gPSAyNTU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBhcnJbaV0gPSBvcmlnaW5hbEFycmF5W29yaWdpbmFsSV07XG4gICAgICBhcnJbaSsxXSA9IG9yaWdpbmFsQXJyYXlbb3JpZ2luYWxJKzFdO1xuICAgICAgYXJyW2krMl0gPSBvcmlnaW5hbEFycmF5W29yaWdpbmFsSSsyXTtcbiAgICAgIGFycltpKzNdID0gb3JpZ2luYWxBcnJheVtvcmlnaW5hbEkrM107XG4gICAgfVxuXG4gIH1cblxuICBjb25zdCBpRGF0YSA9IG5ldyBJbWFnZURhdGEoYXJyLCB3aWR0aCwgaGVpZ2h0KTtcbiAgY29udGV4dC5wdXRJbWFnZURhdGEoaURhdGEgLCBNYXRoLm1pbihjdHAueCwgZnRwLngpLCBDT05TVFMuQ0FOVkFTX0hFSUdIVCAtIENPTlNUUy5XQUxMX0hFSUdIVCwgMCwgMCwgY2FudmFzV2lkdGgsIENPTlNUUy5XQUxMX0hFSUdIVCk7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdNYXJrICh6OiBudW1iZXIsIHJvYWRDZW50ZXI6IG51bWJlcikge1xuICBsZXQgbWFya1dpZHRoID0gMjAuMDtcbiAgbGV0IG1hcmtfbGVmdF94ID0gcm9hZENlbnRlciAtIG1hcmtXaWR0aCAvIDIuMDtcbiAgbGV0IG1hcmtfcmlnaHRfeCA9IHJvYWRDZW50ZXIgKyBtYXJrV2lkdGggLyAyLjA7XG4gIGxldCBtYXJrX2xlZnRfYm90dG9tX3BvaW50OiBNb2RlbFBvaW50ID0ge3g6IG1hcmtfbGVmdF94LCB5OiAwLjAsIHo6IE1hdGgubWF4KHosIENPTlNUUy5aX01JTil9O1xuICBsZXQgbWFya19yaWdodF90b3BfcG9pbnQ6IE1vZGVsUG9pbnQgPSB7eDogbWFya19yaWdodF94LCB5OiAwLjAsIHo6IE1hdGgubWluKHogKyBDT05TVFMuTUFSS19MRU5HVEgsIENPTlNUUy5aX0hPUklaT04pfTtcblxuICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgZHJhd1JlY3RYWShjb250ZXh0LCBtYXJrX2xlZnRfYm90dG9tX3BvaW50LCBtYXJrX3JpZ2h0X3RvcF9wb2ludCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBibG9ja0xlZnQgKHBvc2l0aW9uOiBudW1iZXIsIHJvYWRDZW50ZXI6IG51bWJlcikge1xuICByZXR1cm4gcG9zaXRpb24gPCAwLjAgPyByb2FkQ2VudGVyIC0gQ09OU1RTLkJMT0NLX01BUkdJTiAtIENPTlNUUy5CTE9DS19XSURUSCA6IHJvYWRDZW50ZXIgKyBDT05TVFMuQkxPQ0tfTUFSR0lOO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJsb2NrUmlnaHQgKHBvc2l0aW9uOiBudW1iZXIsIHJvYWRDZW50ZXI6IG51bWJlcikge1xuICByZXR1cm4gcG9zaXRpb24gPCAwLjAgPyByb2FkQ2VudGVyIC0gQ09OU1RTLkJMT0NLX01BUkdJTiA6IHJvYWRDZW50ZXIgKyBDT05TVFMuQkxPQ0tfTUFSR0lOICsgQ09OU1RTLkJMT0NLX1dJRFRIO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdCbG9jayAoejogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyLCByb2FkQ2VudGVyOiBudW1iZXIpIHtcbiAgbGV0IGJsb2NrTGVmdF94ID0gYmxvY2tMZWZ0IChwb3NpdGlvbiwgcm9hZENlbnRlcik7XG4gIGxldCBibG9ja1JpZ2h0X3ggPSBibG9ja1JpZ2h0IChwb3NpdGlvbiwgcm9hZENlbnRlcik7XG5cblxuICBpZiAoeiA8IENPTlNUUy5aX0hPUklaT04gLyAyKSB7XG4gICAgLy9ZWlxuICAgIGNvbnN0IGJsb2NrRWRnZV94ID0gcG9zaXRpb24gPiAwID8gYmxvY2tMZWZ0X3ggOiBibG9ja1JpZ2h0X3g7XG4gICAgY29uc3QgZmJwIDogTW9kZWxQb2ludCA9IHt4OiBibG9ja0VkZ2VfeCwgeTogMCwgejogeiArIDEwfTtcbiAgICBjb25zdCBjdHAgOiBNb2RlbFBvaW50ID0ge3g6IGJsb2NrRWRnZV94LCB5OiBDT05TVFMuQkxPQ0tfSEVJR0hULCB6fTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwia2hha2lcIjtcbiAgICBkcmF3UmVjdFlaIChjb250ZXh0LCBmYnAsIGN0cCk7XG4gICAgLy9YWlxuICAgIGNvbnN0IGNscCA6IE1vZGVsUG9pbnQgPSB7eDogYmxvY2tMZWZ0X3gseTogQ09OU1RTLkJMT0NLX0hFSUdIVCwgejogen07XG4gICAgY29uc3QgZnJwIDogTW9kZWxQb2ludCA9IHt4OiBibG9ja1JpZ2h0X3gsIHk6IENPTlNUUy5CTE9DS19IRUlHSFQsIHo6IHogKyAxMH07XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBcImtoYWtpXCI7XG4gICAgZHJhd1JlY3RYWiAoY29udGV4dCwgY2xwLCBmcnApO1xuXG4gIH1cblxuICAvL1hZXG4gIGNvbnN0IHRscCA9IGNhbnZhc1BvaW50KHt4OiBibG9ja0xlZnRfeCwgeTogQ09OU1RTLkJMT0NLX0hFSUdIVCwgejogen0pO1xuICBjb25zdCBicnAgPSBjYW52YXNQb2ludCh7eDogYmxvY2tSaWdodF94LCB5OiAwLjAsIHo6IHp9KTtcbiAgaWYgKHogPiAoQ09OU1RTLlpfSE9SSVpPTiAtIENPTlNUUy5aX01JTikgKjIvMykge1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlcy5nZXQoJ2NvbmNyZXRlX2ZhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQsIHRscC54LCB0bHAueSwgYnJwLnggLSB0bHAueCwgYnJwLnkgLSB0bHAueSk7XG4gIH0gZWxzZSBpZiAoeiA+IChDT05TVFMuWl9IT1JJWk9OIC0gQ09OU1RTLlpfTUlOKSAqMS8zKSB7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VzLmdldCgnY29uY3JldGUnKSBhcyBIVE1MSW1hZ2VFbGVtZW50LCB0bHAueCwgdGxwLnksIGJycC54IC0gdGxwLngsIGJycC55IC0gdGxwLnkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlcy5nZXQoJ2NvbmNyZXRlX2Nsb3NlJykgYXMgSFRNTEltYWdlRWxlbWVudCwgdGxwLngsIHRscC55LCBicnAueCAtIHRscC54LCBicnAueSAtIHRscC55KTtcbiAgfVxuICBcbiAgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dCAodGV4dDogc3RyaW5nLCBoaWdobGlnaHQ6IGJvb2xlYW4pIHtcbiAgY29udGV4dC5mb250ID0gJzIwcHggc2Fucy1zZXJpZic7XG4gIGlmIChoaWdobGlnaHQpIHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICdncmVlbic7XG4gIH0gZWxzZSB7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICB9XG4gIGNvbnN0IFRFWFRfV0lEVEggPSAxMDA7XG4gIGNvbnN0IFRFWFRfTUFSR0lOID0gMjA7XG4gIGNvbnRleHQuZmlsbFRleHQgKHRleHQsIENPTlNUUy5DQU5WQVNfV0lEVEggLSBURVhUX1dJRFRIIC0gVEVYVF9NQVJHSU4sIFRFWFRfTUFSR0lOLCBURVhUX1dJRFRIKTtcbn1cblxuXG4vKlxuZXhwb3J0ICBhc3luYyBmdW5jdGlvbiBzaGFyZUltYWdlV2l0aFdhc20gKCkge1xuICBjb25zdCBtZW1vcnkgPSBuZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtpbml0aWFsOiAxMCwgbWF4aW11bTogMTAwfSk7XG4gIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmV0Y2goXCJ3YXNtL3JvYWRfZ2FtZV93YXNtLndhc21cIik7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYnl0ZXMuYXJyYXlCdWZmZXIoKTtcbiAgY29uc3QgcmVzdWx0T2JqZWN0ID0gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUocmVzcG9uc2UsIHsganM6IHsgbWVtOiBtZW1vcnkgfSB9KTtcbiAgY29uc3QgaW1hZ2VEYXRhID0gcmF3RGF0YS5nZXQoJ2ZvcmVzdCcpIGFzIEltYWdlRGF0YTtcbiAgY29uc3Qgc2l6ZSA9IGltYWdlRGF0YS5oZWlnaHQgKiBpbWFnZURhdGEud2lkdGggKiA0O1xuICAvL0B0cy1pZ25vcmVcbiAgY29uc3QgZGF0YVB0ciA9IHJlc3VsdE9iamVjdC5pbnN0YW5jZS5leHBvcnRzLm1hbGxvYyhzaXplKTtcbiAgXG5cbn1cbiovXG5cbi8qXG5mdW5jdGlvbiBwdXRGb3Jlc3RGcm9tQ2FjaGUgKGtleTogc3RyaW5nLCBtYXhYOiBudW1iZXIpIHtcblxuICBjb25zdCBjYW52YXNQb2ludHMgPSBjYWNoZVBvaW50cy5nZXQoa2V5KSBhcyB7XG4gICAgY2JwIDogQ2FudmFzUG9pbnQsXG4gICAgY3RwIDogQ2FudmFzUG9pbnQsXG4gICAgZnRwIDogQ2FudmFzUG9pbnQsXG4gICAgZmJwIDogQ2FudmFzUG9pbnQsXG4gIH07XG4gIGNvbnN0IGZ0cCA9IGNhbnZhc1BvaW50cy5mdHA7XG4gIGNvbnN0IGN0cCA9IGNhbnZhc1BvaW50cy5jdHA7XG5cbiAgY29uc3QgY2FudmFzV2lkdGggPSBNYXRoLmFicyhmdHAueCAtIGN0cC54KTtcbiAgY29uc3QgaURhdGE9IHJhd0RhdGFDYWNoZS5nZXQoa2V5KSBhcyBJbWFnZURhdGE7XG5cbiAgXG4gIGNvbnRleHQuc2F2ZSgpO1xuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBjb250ZXh0Lm1vdmVUbyhjYnAueCwgY2JwLnkpO1xuICBjb250ZXh0LmxpbmVUbyhjdHAueCwgY3RwLnkpO1xuICBjb250ZXh0LmxpbmVUbyhmdHAueCwgZnRwLnkpO1xuICBjb250ZXh0LmxpbmVUbyhmYnAueCwgZmJwLnkpO1xuICBjb250ZXh0LmNsaXAoKTtcbiAgXG4gY29udGV4dC5wdXRJbWFnZURhdGEoaURhdGEgLCBNYXRoLm1pbihjdHAueCwgZnRwLngpLCBDT05TVFMuQ0FOVkFTX0hFSUdIVCAtIENPTlNUUy5XQUxMX0hFSUdIVCwgMCwgMCwgY2FudmFzV2lkdGgsIENPTlNUUy5XQUxMX0hFSUdIVCk7XG4gLy9jb250ZXh0LnJlc3RvcmUoKTtcbn1cbiovIiwiaW1wb3J0IHtjbGVhciwgZHJhd0JhY2tncm91bmQsIGRyYXdTdGFycywgZHJhd01hcmssIGRyYXdCbG9jaywgZHJhd1RleHR9IGZyb20gJy4vZHJhd09iamVjdHMnO1xuaW1wb3J0IHsgY2hlY2tDcmFzaCwgdXBkYXRlTWFya3MsIHVwZGF0ZUJsb2NrcywgY3JlYXRlQmxvY2tzIH0gZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQge1xuICBDT1VOVERPV05fVElNRSwgWl9NSU4sIFpfSE9SSVpPTiwgXG4gIE1BWF9QT1NJVElPTiwgTlVNX09GX1JPQURfTUFSS1MsIE1BUktfTEVOR1RILFxuICBCTE9DS19QUk9CQUJJTElUWSwgRElTVEFOQ0VfQkVUV0VFTl9CTE9DS1MsIE5VTV9PRl9CTE9DS1MsIFRJQ0tTX1BFUl9CTE9DSywgU1BFRUQsIFNQRUVEX0ZPUkVTVFxufSBmcm9tICcuL2NvbnN0cyc7XG5leHBvcnQgeyBsb2FkSW1hZ2VzLCBsb2FkUmF3RGF0YSB9IGZyb20gJy4vZHJhd09iamVjdHMnO1xuXG5cbmV4cG9ydCB0eXBlIFJvYWRCbG9jayA9IHtcbiAgejogbnVtYmVyO1xuICBwb3NpdGlvbjogbnVtYmVyO1xufVxuXG5sZXQgcm9hZE1hcmtzIDogbnVtYmVyW10gPSBbXTtcbmxldCByb2FkQmxvY2tzIDogUm9hZEJsb2NrW10gPSBbXTtcbmxldCB0aWNrTnVtID0gMDtcbmxldCBmcHMgPSAwO1xuXG4vL9Ci0LDQudC80LXRgFxubGV0IHNhdmVkVGltZSA9IDA7XG5sZXQgdGltZXN0YW1wID0gMDtcbmxldCB0aW1lUmVtYWluaW5nID0gQ09VTlRET1dOX1RJTUU7XG5cbi8v0LjQt9C80LXRgNC10L3QuNC1IEZQU1xubGV0IHRzMCA9IDA7XG5sZXQgdHMxID0gMDtcbmxldCB0czIgPSAwO1xuXG4vL9CT0LXQvdC10YDQsNGG0LjRjyDQsdC70L7QutC+0LJcbmxldCBkaXN0YW5jZVRvTmV4dEJsb2NrID0gMDtcbi8v0J/QvtCy0L7RgNC+0YJcbmxldCByb2FkUG9zaXRpb24gPSAtMTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBOVU1fT0ZfUk9BRF9NQVJLUzsgaSsrKSB7XG4gIHJvYWRNYXJrcy5wdXNoKFpfTUlOICsgaSAqIChNQVJLX0xFTkdUSCArIE1BUktfTEVOR1RIKSk7XG59XG5cblxuZnVuY3Rpb24gaW5pdEJsb2NrcygpIHtcblxuICBsZXQgZGlzdGFuY2UgPSAoWl9IT1JJWk9OIC0gWl9NSU4pLzIgKyBaX01JTjtcbiAgd2hpbGUgKGRpc3RhbmNlIDwgWl9IT1JJWk9OKSB7XG4gICAgY29uc3QgY2hhbmNlID0gTWF0aC5yYW5kb20oKTtcbiAgICBpZiAoY2hhbmNlIDwgQkxPQ0tfUFJPQkFCSUxJVFkpIHtcbiAgICAgIHJvYWRCbG9ja3MucHVzaCh7XG4gICAgICAgIHo6IGRpc3RhbmNlLFxuICAgICAgICBwb3NpdGlvbjogTWF0aC5yYW5kb20oKSA+IDAuNSA/IDEgOiAtMSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBkaXN0YW5jZSArPSBESVNUQU5DRV9CRVRXRUVOX0JMT0NLUztcbiAgfVxuXG4gIGxldCBpID0gcm9hZEJsb2Nrcy5sZW5ndGg7XG4gIHdoaWxlIChpIDwgTlVNX09GX0JMT0NLUykge1xuICAgIHJvYWRCbG9ja3MucHVzaCh7XG4gICAgICB6OiAwLFxuICAgICAgcG9zaXRpb246IDAsXG4gICAgfSk7XG4gICAgaSsrO1xuICB9XG5cbn1cbmluaXRCbG9ja3MoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRUaW1lcigpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgdGltZXN0YW1wID0gbm93O1xuICB0czAgPSBub3c7XG4gIHRzMSA9IG5vdztcbiAgdHMyID0gbm93O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUaW1lICgpIHtcbiAgc2F2ZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCArIHNhdmVkVGltZTtcbn1cbmxldCBoaWdoRGV0YWlscyA9IGZhbHNlO1xuZXhwb3J0IGZ1bmN0aW9uIHNldERldGFpbHMgKGRldGFpbHM6IGJvb2xlYW4pIHtcbiAgaGlnaERldGFpbHMgPSBkZXRhaWxzO1xufVxuXG5leHBvcnQgZW51bSBHYW1lUmVzdWx0IHtcbiAgT0ssXG4gIFdPTixcbiAgTE9TVCxcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJTY2VuZShyb2FkUG9zaXRpb25Hb2FsOiBudW1iZXIpIDogR2FtZVJlc3VsdCB7XG5cbiAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXAgKyBzYXZlZFRpbWU7XG4gIGNvbnN0IGVsYXBzZWRTZWMgPSBNYXRoLmZsb29yKGVsYXBzZWQvMTAwMCk7XG4gIHRpbWVSZW1haW5pbmcgPSBDT1VOVERPV05fVElNRSAtIGVsYXBzZWRTZWM7XG4gIFxuICB0czEgPSB0czI7XG4gIHRzMiA9IERhdGUubm93KCk7XG5cbiAgaWYgKHRzMiAtIHRzMCA+IDEwMDApIHtcbiAgICBmcHMgPSB0aWNrTnVtO1xuICAgIHRpY2tOdW0gPSAwO1xuICAgIHRzMCA9IHRzMjtcbiAgfVxuXG4gIGNvbnN0IGltcGxpZWRUaWNrcyA9ICh0czIgLSB0czEpIC8gMTAwMCAqIDYwO1xuICBjb25zdCBzcGVlZCA9IFNQRUVEICogaW1wbGllZFRpY2tzO1xuXG4gIGRpc3RhbmNlVG9OZXh0QmxvY2sgPSBkaXN0YW5jZVRvTmV4dEJsb2NrICsgc3BlZWQ7XG4gICAgXG4gIGNvbnN0IGVwc2lsb24gPSAwLjA4O1xuICBpZiAoTWF0aC5hYnMocm9hZFBvc2l0aW9uIC0gcm9hZFBvc2l0aW9uR29hbCkgPiBlcHNpbG9uKSB7XG4gICAgcm9hZFBvc2l0aW9uID0gcm9hZFBvc2l0aW9uICsgTWF0aC5zaWduKHJvYWRQb3NpdGlvbkdvYWwgLSByb2FkUG9zaXRpb24pICogZXBzaWxvbiAqIGltcGxpZWRUaWNrcztcbiAgICByb2FkUG9zaXRpb24gPSBNYXRoLm1pbihyb2FkUG9zaXRpb24sIDEpO1xuICAgIHJvYWRQb3NpdGlvbiA9IE1hdGgubWF4KHJvYWRQb3NpdGlvbiwgLTEpO1xuICB9XG4gIGNvbnN0IHJvYWRDZW50ZXIgPSBNQVhfUE9TSVRJT04gKiByb2FkUG9zaXRpb247XG4gIGNvbnN0IGNhckNlbnRlciA9IC0gcm9hZENlbnRlcjtcbiAgXG4gIGNvbnN0IGlzQ3Jhc2hlZCA9IGNoZWNrQ3Jhc2gocm9hZEJsb2Nrcywgcm9hZENlbnRlciwgY2FyQ2VudGVyKTtcbiAgaWYgKGlzQ3Jhc2hlZCkge1xuICAgIHJldHVybiBHYW1lUmVzdWx0LkxPU1Q7XG4gIH1cblxuICByb2FkTWFya3MgPSB1cGRhdGVNYXJrcyhyb2FkTWFya3MsIHNwZWVkKTtcbiAgcm9hZEJsb2NrcyA9IHVwZGF0ZUJsb2Nrcyhyb2FkQmxvY2tzLCBzcGVlZCk7XG4gIHRpY2tOdW0gPSB0aWNrTnVtICsgMTtcbiAgaWYgKGRpc3RhbmNlVG9OZXh0QmxvY2sgPiBESVNUQU5DRV9CRVRXRUVOX0JMT0NLUykge1xuICAgIHJvYWRCbG9ja3MgPSBjcmVhdGVCbG9ja3Mocm9hZEJsb2Nrcyk7XG4gICAgZGlzdGFuY2VUb05leHRCbG9jayA9IDA7XG4gIH1cblxuICAvL9GA0LjRgdGD0LXQvFxuICBjbGVhcigpO1xuXG4gIGRyYXdCYWNrZ3JvdW5kKHJvYWRDZW50ZXIsIE1hdGguZmxvb3IoU1BFRURfRk9SRVNUICogaW1wbGllZFRpY2tzKSwgaGlnaERldGFpbHMpO1xuICBkcmF3U3RhcnMoKTtcblxuICBmb3IgKGxldCBpID0gcm9hZE1hcmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuICAgIGRyYXdNYXJrKHJvYWRNYXJrc1tpXSwgcm9hZENlbnRlcik7XG4gIH1cblxuICBmb3IgKGxldCBpID0gcm9hZEJsb2Nrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcbiAgICBpZiAocm9hZEJsb2Nrc1tpXS56ID4gWl9NSU4gLSAyLjApIHtcbiAgICAgIGRyYXdCbG9jayhyb2FkQmxvY2tzW2ldLnosIHJvYWRCbG9ja3NbaV0ucG9zaXRpb24sIHJvYWRDZW50ZXIpO1xuICAgIH0gICAgXG4gIH1cblxuICBsZXQgdGltZVJlbWFpbmluZ0Zvcm1hdHRlZCA9ICcwMCc7XG4gIGlmICh0aW1lUmVtYWluaW5nID4gOSkge1xuICAgIHRpbWVSZW1haW5pbmdGb3JtYXR0ZWQgPSBTdHJpbmcodGltZVJlbWFpbmluZyk7XG4gIH0gZWxzZSBpZiAodGltZVJlbWFpbmluZyA+IDApIHtcbiAgICB0aW1lUmVtYWluaW5nRm9ybWF0dGVkID0gJzAnICsgdGltZVJlbWFpbmluZ1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGDQktGA0LXQvNGPOiAke3RpbWVSZW1haW5pbmdGb3JtYXR0ZWR9YCArICdcXHJcXG4nICsgYEZQUzogJHtmcHMgPiA5ID8gZnBzIDogJzAnICsgZnBzfWA7XG4gIGRyYXdUZXh0KHRleHQsIHRpbWVSZW1haW5pbmcgPCAxMCk7XG5cbiAgaWYgKHRpbWVSZW1haW5pbmcgPD0gMCkge1xuICAgIHJldHVybiBHYW1lUmVzdWx0LldPTjtcbiAgfVxuICByZXR1cm4gR2FtZVJlc3VsdC5PSztcblxufVxuICIsImltcG9ydCB7IGJsb2NrTGVmdCwgYmxvY2tSaWdodCB9IGZyb20gJy4vZHJhd09iamVjdHMnO1xuaW1wb3J0IHR5cGUge1JvYWRCbG9ja30gZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQge1pfTUlOLCBaX0hPUklaT04sIE1BUktfTEVOR1RILCBCTE9DS19QUk9CQUJJTElUWSwgQ0FSX1dJRFRIfSBmcm9tICcuL2NvbnN0cydcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1hcmtzIChyb2FkTWFya3M6IG51bWJlcltdLCBzcGVlZDogbnVtYmVyKSA6IG51bWJlcltdIHtcblxuICBjb25zdCB1cGRhdGVkTWFya3MgOiBudW1iZXJbXSA9IG5ldyBBcnJheShyb2FkTWFya3MubGVuZ3RoKTtcbiAgLy/Qn9GA0L7QtNCy0LjQs9Cw0LXQvCDQvtGC0LzQtdGC0LrQuFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvYWRNYXJrcy5sZW5ndGg7IGkrKykge1xuICAgIHVwZGF0ZWRNYXJrc1tpXSA9IHJvYWRNYXJrc1tpXSAtIHNwZWVkOyBcbiAgfVxuXG4gIGlmICh1cGRhdGVkTWFya3NbMF0gPCBaX01JTiAtIE1BUktfTEVOR1RIKSB7XG4gICAgLy/Qo9Cx0LjRgNCw0LXQvCDQvtGC0LzQtdGC0LrRg1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9hZE1hcmtzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgdXBkYXRlZE1hcmtzW2ldID0gcm9hZE1hcmtzW2krMV07IFxuICAgIH1cbiAgICBjb25zdCB6ID0gdXBkYXRlZE1hcmtzW3JvYWRNYXJrcy5sZW5ndGggLSAyXSArIE1BUktfTEVOR1RIICsgTUFSS19MRU5HVEg7XG4gICAgdXBkYXRlZE1hcmtzW3JvYWRNYXJrcy5sZW5ndGgtMV0gPSBNYXRoLm1pbih6LCBaX0hPUklaT04pO1xuICB9XG5cbiAgcmV0dXJuIHVwZGF0ZWRNYXJrcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJsb2NrcyAocm9hZEJsb2NrczogUm9hZEJsb2NrW10sIHNwZWVkOiBudW1iZXIpIDogUm9hZEJsb2NrW10ge1xuICBcbiAgaWYgKHJvYWRCbG9ja3NbMF0ueiA8IDEuMCkge1xuICAgIHJldHVybiByb2FkQmxvY2tzO1xuICB9XG5cbiAgLy/QldGB0LvQuCDQtdGB0YLRjCDQsdC70L7QutC4XG4gIGNvbnN0IHVwZGF0ZWRCbG9ja3MgPSBbLi4ucm9hZEJsb2Nrc107XG4gIC8v0KPQsdC40YDQsNC10Lwg0LHQu9C+0LosINC60L7RgtC+0YDRi9C5INC80Ysg0YPQttC1INC/0YDQvtC10YXQsNC70LhcbiAgaWYgKHVwZGF0ZWRCbG9ja3NbMF0ueiA8IFpfTUlOIC0gMi4wKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwZGF0ZWRCbG9ja3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZWRCbG9ja3NbaV0gPSB1cGRhdGVkQmxvY2tzW2krMV07XG4gICAgICB9XG4gICAgICB1cGRhdGVkQmxvY2tzW3VwZGF0ZWRCbG9ja3MubGVuZ3RoIC0gMV0gPSB7ejowLjAsIHBvc2l0aW9uOiAwLjB9O1xuICB9XG4gIC8v0JTQstC40LPQsNC10Lwg0LHQu9C+0LrQuFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVwZGF0ZWRCbG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICB1cGRhdGVkQmxvY2tzW2ldLnogPSB1cGRhdGVkQmxvY2tzW2ldLnogLSBzcGVlZDtcbiAgfVxuXG4gIHJldHVybiB1cGRhdGVkQmxvY2tzO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCbG9ja3MgKHJvYWRCbG9ja3M6IFJvYWRCbG9ja1tdKSA6IFJvYWRCbG9ja1tdIHtcbiAgLy/QndGD0LbQvdC+INC70Lgg0LTQvtCx0LDQstC70Y/RgtGMINC90L7QstGL0LUg0LHQu9C+0LrQuFxuICBsZXQgZnJlZUlkeCA9IHJvYWRCbG9ja3MubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvYWRCbG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyb2FkQmxvY2tzW2ldLnogPCAxLjApIHtcbiAgICAgICAgICBmcmVlSWR4ID0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgfVxuICBpZiAoZnJlZUlkeCA9PT0gcm9hZEJsb2Nrcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcm9hZEJsb2NrcztcbiAgfVxuXG4gIGlmIChNYXRoLnJhbmRvbSgpID4gQkxPQ0tfUFJPQkFCSUxJVFkpIHtcbiAgICByZXR1cm4gcm9hZEJsb2NrcztcbiAgfVxuICBcbiAgY29uc3QgdXBkYXRlZEJsb2NrcyA9IFsuLi5yb2FkQmxvY2tzXTtcbiAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcbiAgICB1cGRhdGVkQmxvY2tzW2ZyZWVJZHhdID0ge3o6IFpfSE9SSVpPTiwgcG9zaXRpb246IC0xLjB9O1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZWRCbG9ja3NbZnJlZUlkeF0gPSB7ejogWl9IT1JJWk9OLCBwb3NpdGlvbjogMS4wfTtcbiAgfVxuICByZXR1cm4gdXBkYXRlZEJsb2NrcztcbiAgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NyYXNoIChyb2FkQmxvY2tzOiBSb2FkQmxvY2tbXSwgcm9hZENlbnRlcjogbnVtYmVyLCBjYXJDZW50ZXI6IG51bWJlcik6IGJvb2xlYW4ge1xuICBjb25zdCBmaXJzdEJsb2NrID0gcm9hZEJsb2Nrc1swXTtcbiAgaWYgKGZpcnN0QmxvY2sueiA+IDEuMCAmJiBmaXJzdEJsb2NrLnogPCBaX01JTikge1xuICAgICAgY29uc3QgYmxvY2tMZWZ0WCA9IGJsb2NrTGVmdChmaXJzdEJsb2NrLnBvc2l0aW9uLCByb2FkQ2VudGVyKTtcbiAgICAgIGNvbnN0IGJsb2NrUmlnaHRYID0gYmxvY2tSaWdodChmaXJzdEJsb2NrLnBvc2l0aW9uLCByb2FkQ2VudGVyKTtcblxuICAgICAgaWYgKGNhckNlbnRlciA+IGJsb2NrTGVmdFggLSBDQVJfV0lEVEgvMi4wICYmIGNhckNlbnRlciA8IGJsb2NrUmlnaHRYICsgQ0FSX1dJRFRILzIuMCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn0iLCJpbXBvcnQge3JlbmRlclNjZW5lLCBsb2FkSW1hZ2VzLCBsb2FkUmF3RGF0YSwgaW5pdFRpbWVyLCBzYXZlVGltZSwgR2FtZVJlc3VsdCwgc2V0RGV0YWlsc30gZnJvbSAnLi9nYW1lL2luZGV4JztcblxubGV0IHJvYWRfcG9zaXRpb25fZ29hbCA9IC0xO1xubGV0IHBhdXNlZCA9IGZhbHNlO1xuXG5jb25zdCBuZXh0U2NlbmUgPSAoKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IHJlbmRlclNjZW5lKHJvYWRfcG9zaXRpb25fZ29hbCk7XG4gIGlmIChyZXN1bHQgPT09IEdhbWVSZXN1bHQuV09OKSB7XG4gICAgdmljdG9yeUhhbmRsZXIoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHJlc3VsdCA9PT0gR2FtZVJlc3VsdC5MT1NUKSB7XG4gICAgY3Jhc2hIYW5kbGVyKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghcGF1c2VkKSB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+bmV4dFNjZW5lKCkpO1xuICB9IGVsc2Uge1xuICAgIHNhdmVUaW1lKCk7XG4gIH1cbn0gXG5cbmZ1bmN0aW9uIHJ1biAoKSB7XG4gIGluaXRUaW1lcigpO1xuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT5uZXh0U2NlbmUoKSk7XG59XG5cblxuZnVuY3Rpb24gY3Jhc2hIYW5kbGVyKCkge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcHJvY2Vzc0tleSk7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb3N0JykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGRpdi5oaWRkZW4gPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHZpY3RvcnlIYW5kbGVyKCkge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcHJvY2Vzc0tleSk7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3b24nKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgZGl2LmhpZGRlbiA9IGZhbHNlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0QW5kUnVuICgpIHtcblxuXG4gIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDwgNTYwKSB7XG4gICAgLy/QotC10LvQtdGE0L7QvVxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBjb25zdCBsZWZ0QXJyb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1hcnJvdycpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgY29uc3QgcmlnaHRBcnJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1hcnJvdycpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gbGVmdEFycm93LndpZHRoIC0gcmlnaHRBcnJvdy53aWR0aCAtIDEwO1xuICAgIGNvbnN0IGF2YWlsYWJsZUhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIDEwO1xuICAgIGNvbnN0IGNhbnZhc0FzcGVjdCA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHQ7XG4gICAgY29uc3QgYXZhaWxhYmxlQXNwZWN0ID0gYXZhaWxhYmxlV2lkdGggLyBhdmFpbGFibGVIZWlnaHQ7XG4gICAgbGV0IGNhbnZhc0hlaWdodCA9IGF2YWlsYWJsZUFzcGVjdCA+IGNhbnZhc0FzcGVjdCA/IGF2YWlsYWJsZUhlaWdodCA6IGF2YWlsYWJsZVdpZHRoIC8gY2FudmFzQXNwZWN0O1xuXG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFN0cmluZyhNYXRoLmZsb29yKGNhbnZhc0hlaWdodCkpICsgJ3B4JztcbiAgICBjYW52YXMuc3R5bGUud2lkdGggPSBTdHJpbmcoTWF0aC5mbG9vcihjYW52YXNIZWlnaHQgKiBjYW52YXNBc3BlY3QpKSArICdweCc7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBTdHJpbmcod2luZG93LmlubmVySGVpZ2h0KSArICdweCc7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IFN0cmluZyh3aW5kb3cuaW5uZXJXaWR0aCkgKyAncHgnO1xuICBcbiAgICBsZWZ0QXJyb3cuc3R5bGUuaGVpZ2h0ID0gU3RyaW5nKE1hdGguZmxvb3Iod2luZG93LmlubmVySGVpZ2h0IC8yKSkgKyAncHgnO1xuICAgIGxlZnRBcnJvdy5oaWRkZW4gPSBmYWxzZTtcbiAgICBsZWZ0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKXtcbiAgICAgIHJvYWRfcG9zaXRpb25fZ29hbCA9IDE7XG4gICAgfSk7XG5cbiAgICByaWdodEFycm93LnN0eWxlLmhlaWdodCA9IFN0cmluZyhNYXRoLmZsb29yKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpKSArICdweCc7XG4gICAgcmlnaHRBcnJvdy5oaWRkZW4gPSBmYWxzZTtcbiAgICByaWdodEFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCl7XG4gICAgICByb2FkX3Bvc2l0aW9uX2dvYWwgPSAtMTtcbiAgICB9KTtcblxuICB9IGVsc2Uge1xuICAgIC8v0JTQtdGB0LrRgtC+0L8gLyDQv9C70LDQvdGI0LXRglxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW51YWwnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBkaXYuaGlkZGVuID0gZmFsc2U7XG4gICAgc2V0RGV0YWlscyh0cnVlKTtcbiAgfVxuICBhd2FpdCBsb2FkSW1hZ2VzKCk7XG4gIGF3YWl0IGxvYWRSYXdEYXRhKCk7XG4gIHJ1bigpO1xufVxuXG5cbmZ1bmN0aW9uIGlzT3JpZW50YXRpb25PayAoKSA6IGJvb2xlYW4ge1xuICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDU2MCkge1xuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDU2MCkge1xuICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuaWYgKGlzT3JpZW50YXRpb25PaygpKSB7XG4gIGluaXRBbmRSdW4oKTtcbn0gZWxzZSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3Jpem9udGFsLWFsZXJ0JykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGRpdi5oaWRkZW4gPSBmYWxzZTtcbn1cblxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKXtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvcml6b250YWwtYWxlcnQnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgaWYgKGlzT3JpZW50YXRpb25PaygpKSB7XG4gICAgZGl2LmhpZGRlbiA9IHRydWU7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgcGF1c2VkID0gZmFsc2U7XG4gICAgICBydW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5pdEFuZFJ1bigpO1xuICAgIH1cbiAgICBcbiAgfSBlbHNlIHtcbiAgICBwYXVzZWQgPSB0cnVlO1xuICAgIGRpdi5oaWRkZW4gPSBmYWxzZTtcbiAgfVxufSk7XG5cblxuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBwcm9jZXNzS2V5KTtcbmZ1bmN0aW9uIHByb2Nlc3NLZXkoZTogS2V5Ym9hcmRFdmVudCkge1xuICBpZiAoZS5jb2RlID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcm9hZF9wb3NpdGlvbl9nb2FsID0gLTE7XG4gIH0gIFxuICBcbiAgaWYgKGUuY29kZSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcm9hZF9wb3NpdGlvbl9nb2FsID0gMTtcbiAgfVxuXG4gIGlmIChlLmNvZGUgPT09ICdFc2NhcGUnKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHBhdXNlZCA9IHRydWU7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhdXNlZCcpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIGRpdi5oaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChlLmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhdXNlZCcpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgZGl2LmhpZGRlbiA9IHRydWU7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHJ1bigpO1xuICAgIH1cbiAgfVxufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9